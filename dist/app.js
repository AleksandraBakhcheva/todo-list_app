(()=>{"use strict";var t={374:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0,e.State=class{constructor(){this.listeners=[]}addListener(t){this.listeners.push(t)}}},231:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Todo=void 0,e.Todo=class{constructor(t,e,n,o){this.id=t,this.title=e,this.description=n,this.status=o}}},277:function(t,e,n){var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.TodoInput=void 0;const i=n(180),s=n(372),a=n(403);class d{constructor(){this.formEl=document.querySelector("form"),this.titleEl=document.getElementById("title"),this.descriptionEl=document.getElementById("description"),this.construct()}construct(){this.formEl.addEventListener("submit",this.submitHandler)}submitHandler(t){t.preventDefault();const e=this.collectUserInput();if(Array.isArray(e)){const[t,n]=e;s.todoState.addTodo(t,n),this.changeColor(".title","black"),this.changeColor(".description","black"),this.clearInput()}}clearInput(){this.titleEl.value="",this.descriptionEl.value=""}changeColor(t,e){document.querySelector(`${t} span`).style.color=e}collectUserInput(){const t=this.titleEl.value,e=this.descriptionEl.value,n={value:t,required:!0,minLength:5,maxLength:100},o={value:e,required:!0,minLength:5,maxLength:400};if((0,a.validate)(n)&&(0,a.validate)(o))return[t,e];(0,a.validate)(n)?(this.changeColor(".title","black"),this.changeColor(".description","red")):this.changeColor(".title","red")}}o([i.autobind,r("design:type",Function),r("design:paramtypes",[Event]),r("design:returntype",void 0)],d.prototype,"submitHandler",null),e.TodoInput=d},685:function(t,e,n){var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.TodoItem=void 0;const i=n(180);class s{constructor(t,e){this.todo=t,this.element=e,this.liElement=document.createElement("li"),this.liElement.setAttribute("draggable","true"),this.renderContent(),this.construct()}construct(){this.liElement.addEventListener("dragstart",this.dragStartHandler),this.liElement.addEventListener("dragend",this.dragEndHandler)}dragStartHandler(t){t.dataTransfer.setData("text/plain",this.todo.id),t.dataTransfer.effectAllowed="move"}dragEndHandler(t){}renderContent(){const t=`<h3>${this.todo.title}</h3>\n    <div>${this.todo.description}</div>`;this.liElement.innerHTML=t,this.element.appendChild(this.liElement)}}o([i.autobind,r("design:type",Function),r("design:paramtypes",[DragEvent]),r("design:returntype",void 0)],s.prototype,"dragStartHandler",null),e.TodoItem=s},389:function(t,e,n){var o=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0}),e.TodoList=void 0;const i=n(180),s=n(685),a=n(372),d=n(853);class l{constructor(t){this.type=t,this.assignedTodos=[],this.ulElement=document.getElementById(`${this.type}-todos-list`),a.todoState.addListener((t=>{const e=t.filter((t=>"active"===this.type?t.status===d.TodoStatus.ACTIVE:t.status===d.TodoStatus.FINISHED));this.assignedTodos=e,this.renderTodos()})),this.construct()}construct(){this.ulElement.addEventListener("dragover",this.dragOverHandler),this.ulElement.addEventListener("dragleave",this.dragLeaveHandler),this.ulElement.addEventListener("drop",this.dropHandler)}dragOverHandler(t){t.preventDefault()}dragLeaveHandler(t){}dropHandler(t){if(t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]){let e=t.dataTransfer.getData("text/plain");a.todoState.moveTodo(e,"active"===this.type?d.TodoStatus.ACTIVE:d.TodoStatus.FINISHED)}}renderTodos(){this.ulElement.innerHTML="";for(const t of this.assignedTodos)new s.TodoItem(t,this.ulElement)}}o([i.autobind,r("design:type",Function),r("design:paramtypes",[DragEvent]),r("design:returntype",void 0)],l.prototype,"dragOverHandler",null),o([i.autobind,r("design:type",Function),r("design:paramtypes",[DragEvent]),r("design:returntype",void 0)],l.prototype,"dragLeaveHandler",null),o([i.autobind,r("design:type",Function),r("design:paramtypes",[DragEvent]),r("design:returntype",void 0)],l.prototype,"dropHandler",null),e.TodoList=l},520:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TodoState=void 0;const o=n(374),r=n(231),i=n(853);class s extends o.State{constructor(){super(),this.todos=[]}static getInstance(){return this.instance||(this.instance=new s),this.instance}addTodo(t,e){const n=new r.Todo(Math.random().toString(),t,e,i.TodoStatus.ACTIVE);this.todos.push(n),this.updateListeners()}moveTodo(t,e){const n=this.todos.find((e=>e.id===t));n&&n.status!==e&&(n.status=e,this.updateListeners())}updateListeners(){for(const t of this.listeners)t(this.todos)}}e.TodoState=s},180:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.autobind=void 0,e.autobind=function(t,e,n){const o=n.value;return{configurable:!0,get(){return o.bind(this)}}}},853:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TodoStatus=void 0,(n=e.TodoStatus||(e.TodoStatus={}))[n.ACTIVE=0]="ACTIVE",n[n.FINISHED=1]="FINISHED"},403:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validate=void 0,e.validate=function(t){let e=!0;return t.required&&(e=e&&0!==t.value.toString().trim().length),null!=t.minLength&&"string"==typeof t.value&&(e=e&&t.value.length>=t.minLength),null!=t.maxLength&&"string"==typeof t.value&&(e=e&&t.value.length<=t.maxLength),e}},372:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.todoState=void 0;const o=n(520);e.todoState=o.TodoState.getInstance()}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(()=>{const t=n(277),e=n(389);new t.TodoInput,new e.TodoList("active"),new e.TodoList("finished")})()})();